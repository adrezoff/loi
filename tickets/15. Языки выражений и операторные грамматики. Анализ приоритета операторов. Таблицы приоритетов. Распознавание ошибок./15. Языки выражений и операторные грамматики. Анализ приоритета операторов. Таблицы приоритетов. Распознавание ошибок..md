## 15. Языки выражений и операторные грамматики. Анализ приоритета операторов. Таблицы приоритетов. Распознавание ошибок.

Для анализа языков выражений часто используются **операторные грамматики**, которые позволяют эффективно обрабатывать приоритеты и ассоциативность операций без построения избыточно сложных синтаксических деревьев.

### Операторные грамматики и языки выражений

**Операторная грамматика** — это $\lambda$-свободная грамматика, в которой правые части правил не содержат двух и более нетерминалов подряд. Это свойство отражает структуру типичных выражений, где операнды (нетерминалы) разделены знаками операций или скобками (терминалами).

В таких языках два терминала называются соседними, если между ними находится не более одного нетерминала. Важное правило восходящего анализа здесь гласит: если в форме $aEb$ только один из терминалов принадлежит основе, то нетерминал $E$ также входит в основу. Это позволяет при поиске основы ориентироваться преимущественно на **терминальные символы**.

### Анализ приоритета операторов

Этот метод основан на идее, что выполнение операции — это фактически **свертка** оператора вместе с его операндами в единое целое (новый операнд),. Порядок сверток определяется:
*   **Приоритетом:** операции с более высоким приоритетом (например, умножение перед сложением) сворачиваются раньше.
*   **Ассоциативностью:** определяет порядок для одноименных операций (например, левоассоциативные операции выполняются слева направо).

### Таблицы приоритетов (отношения предшествования)
Для формализации процесса используются три отношения операторного предшествования между терминалами $a$ и $b$:
1.  **$a \doteq b$**: оба символа должны быть свернуты на одном шаге (например, парные скобки или элементы функциональных конструкций).
2.  **$a <\cdot b$**: символ $b$ имеет более высокий приоритет и должен быть свернут раньше $a$.
3.  **$a \cdot> b$**: символ $a$ имеет более высокий приоритет и сворачивается раньше $b$.

При построении **таблицы приоритетов** руководствуются правилами:
*   Атомарные операнды имеют наивысший приоритет и сворачиваются в первую очередь.
*   Содержимое скобок сворачивается раньше того, что находится за ними.
*   Для граничных условий используются маркеры: $\vdash$ всегда $<\cdot$ первому символу, а последний символ $\dashv$ всегда $\cdot>$.

**Основа** в цепочке всегда ограничена слева отношением $<\cdot,$ справа — первым встретившимся отношением $\cdot>,$ а внутри основы допускается только отношение $\doteq$.

### Распознавание ошибок

В процессе анализа ошибки могут быть обнаружены двумя способами:
1.  **Отсутствие отношений:** если в таблице на пересечении текущих символов находится пустая клетка, это означает, что данные терминалы не могут соседствовать в корректном выражении.
2.  **Отсутствие правила свертки:** если границы основы найдены, но в грамматике нет правила, правая часть которого соответствует этой основе (например, встретилось $E+E,$ но ожидалось другое сочетание), фиксируется синтаксическая ошибка.
